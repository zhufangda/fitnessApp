<!--
 * @description  
 * @author ZHU Fangda
 * @Date 2020-01-28 195242
 * @LastEditors  : ZHU Fangda
 * @LastEditTime : 2020-02-04 16:11:16
 -->
<!DOCTYPE html>
<html> 
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Command</title>

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bottom_nav.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="command.css">
    



  </head>
  <body>
    <img src="img/basket_yellow.svg" id="deco1">
    <img src="img/tag_yellow.svg" id="deco2">
    <img src="img/tableware_yellow.svg" id="deco3">

    <div id="trolley">
      <span id="total">0</span>
    </div>
    

    <div id="container">
      <h1>Easy take to healthy food</h1>

      <div class="item">
        <div class="photo_desp">
          <div class="price">
            1 €
          </div>
          <img src="img/prod1.png">
        </div>
  
        <div class="card">
          <legend>Fruits and vegetables juice</legend>
          <div class="choose-amount ">
            <img src="img/minus_item.svg" class="btn_minus" onclick="minus('quantity_prod1')">
            <div class="quantity" id="quantity_prod1"></div>
            <img src="img/add_item.svg" class="btn_add" onclick="add('quantity_prod1')">
            <img src="img/send_to_cart.svg" clas="btn_add_to_cart">
          </div>
        </div>
      </div>
      
      <div class="item">
        <div class="photo_desp">
          <div class="price">
            3 €
          </div>
          <img src="img/prod2.png">
        </div>
  
        <div class="card">
          <legend>Skinless chicken thigh </legend>
          <div class="choose-amount ">
            <img src="img/minus_item.svg" class="btn_minus" onclick="minus('quantity_prod2')">
            <div class="quantity" id="quantity_prod2"></div>
            <img src="img/add_item.svg" class="btn_add" onclick="add('quantity_prod2')">
            <img src="img/send_to_cart.svg" clas="btn_add_to_cart">
          </div>
        </div>
      </div>
  
      <div class="item">
        <div class="photo_desp">
          <div class="price">
            3 €
          </div>
          <img src="img/prod3.png">
        </div>
  
        <div class="card">
          <legend>Protein drink</legend>
          <div class="choose-amount ">
            <img src="img/minus_item.svg" class="btn_minus" onclick="minus('quantity_prod3')">
            <div class="quantity" id="quantity_prod3"></div>
            <img src="img/add_item.svg" class="btn_add" onclick="add('quantity_prod3')">
            <img src="img/send_to_cart.svg" clas="btn_add_to_cart">
          </div>
        </div>
      </div>
    </div>
      


    <div id="bottom-nav" >
      <a href="home.html">
        <img src="img/home_no_selected.svg"/>
      </a>
      
      <a href="record.html">
        <img src="img/record_no_selected.svg"/>  
      </a>

      <a href="search.html">
        <img src="img/search_no_selected.svg"/>  
      </a>
      
      <a href="command.html">
        <img src="img/command_selected.svg"/>
      </a>
      
    </div>


        
  <script>

    const prodList = ['quantity_prod1', 'quantity_prod2', 'quantity_prod3'];

    function updateInterface(){
      for(let prod of prodList){
        // console.log("%s %s %s", prod, document.getElementById(prod),localStorage[prod] )
        if(localStorage[prod]){
          document.getElementById(prod).innerText = localStorage[prod]
        }else{
          document.getElementById(prod).innerText = 0
        }
      }

      if(parseInt(localStorage['total'])){
          document.getElementById('total').innerText = localStorage['total']
        }else{
          document.getElementById('total').innerText = ""
        }
      
    }
    
    
    function updateTotal(){
      localStorage["total"] = 0;

      for(let prod of prodList){
        if(parseInt(localStorage[prod])){
          localStorage["total"] = parseInt(localStorage["total"]) + parseInt(localStorage[prod])
        }
      }
      
    }


    function add(name){

      if( parseInt(localStorage[name])){
        localStorage[name]++;
      }else{
        localStorage[name]=1;
      }
      
      updateTotal();
      updateInterface();
    }


    function minus(name){

      if(parseInt(localStorage[name]) && parseInt(localStorage[name]) > 1){
        localStorage[name]--;
      }else{
        localStorage[name]=0;
      }
      
      updateTotal();
      updateInterface();
    }
    
    updateInterface()

  </script>

 
  </body>


</html>